#!/bin/bash
# Asher Bond 2011
# installs everything recursively

if [ ! -z $1 ]; then
	mybase=$1
else	mybase=`pwd`
fi

cd $mybase

if [ -z $MONDOPATH ]; then
	MONDOPATH='/var/lib/MondocosmOS'
fi

# find all makefiles
makeable=$MONDOPATH/Makeable
find . -type f -name "Makefile" | perl -p -e 's/Makefile$//g' > $makeable

# read Makeable file and pass results to cmmi
exec 3<&0
exec 0<$makeable
while read line
do
	$MONDOPATH/bin/cmmi $line
done
exec 0<&3
